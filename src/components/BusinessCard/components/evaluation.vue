<template>
  <div class="evaluation">
    <div class="star-box">
      <div>æ˜Ÿçº§è¯„ä»·ï¼š</div>
      <i-rate @change="onChange" :value="starNum" size="32">
        {{starNum}}æ˜Ÿ
      </i-rate>
    </div>
    <div>
      <textarea class="my-textarea" v-model="textareaVal" cols="30" rows="10" placeholder="è¯·å‘Šè¯‰æˆ‘ä½ çš„æ„Ÿå—ğŸ˜„"></textarea>
      <i-button @click="handleClick" type="info">æäº¤</i-button>
    </div>
    <i-toast id="toast"/>
  </div>
</template>

<script>
const { $Toast } = require('static/iview/base/index')

export default {
  data () {
    return {
      // æ˜Ÿæ˜Ÿä¸ªæ•°
      starNum: 0,
      // ç”¨æˆ·è¾“å…¥æ¡†ä¸­çš„æ–‡å­—
      textareaVal: ''
    }
  },

  methods: {
    onChange (e) {
      const num = e.mp.detail.index
      this.starNum = num
    },

    handleClick () {
      if (this.starNum === 5) {
        $Toast({ content: 'æ„Ÿè°¢è¯„ä»·ï¼ğŸ˜', type: 'success' })
      } else if (this.starNum === 0) {
        $Toast({ content: 'è¿˜æ²¡æœ‰æ‰“åˆ†å‘¢ï¼', type: 'error' })
      } else {
        $Toast({ content: 'ä»…æ¥å—5æ˜Ÿå¥½è¯„ï¼', type: 'warning' })
      }
    }
  }
}
</script>

<style scoped>
.evaluation {
  height: 100%;
  width: 100%;
  background: #fffef9;
}
.my-textarea {
  border: 1px solid #ccc;
  margin: 10px;
  padding: 5px;
  width: calc(100% - 32px);
  overflow: auto;
  word-break: break-all;
}
.star-box {
  display: flex;
  align-items: center;
  margin: 10px;
}
</style>
